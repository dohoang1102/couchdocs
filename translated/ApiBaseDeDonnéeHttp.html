<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>CouchDocs - ApiBaseDeDonnéeHttp</title>
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/code_highlight.css" type="text/css" media="screen" />
  </head>
  <body>
    <div id="wrapper"> 
      <div id="header">
          <h1><a href="/">CouchDocs</a></h1>
      </div>
      <div id="menu">
  <strong>Navigation</strong>
<ul>
  <li><a href="FrontPage.html">Overview</a></li>
  <li><a href="FrontPage.html#using-couchdb">Using CouchDB</a></li>
  <li><a href="FrontPage.html#when-things-go-wrong">When Things Go Wrong</a></li>
  <li><a href="FrontPage.html#community">Community</a></li>
  <li><a href="FrontPage.html#getting-involved">Get Involved</a></li>
  <li><a href="FrontPage.html#books">Books</a></li>
</ul>

<strong>Short Cuts</strong>
<ul>
  <li><a href="Reference.html">Reference</a></li>
  <li><a href="Frequently_asked_questions.html">FAQ</a></li>
</ul>


      <!-- <ul>
        <li>Overview</li>
        <li>Installation</li>
        <li>Introduction</li>
        <li>Conventions</li>
        <li>
          Sections
          <ul>
            <li>Databases</li>
            <li>
              Documents
              <ul>
                <li>Design</li>
                <li>Local</li>
              </ul>
            </li>
            <li>Views</li>
            <li>Rendering</li>
            <li>Configuration</li>
            <li>Statistics</li>
            <li>Security</li>
          </ul>
        </li>
        <li>API Reference</li>
        <li>Client Libraries</li>
        <li>How do I?</li>
        <li>FAQ</li>
      </ul> -->
        
</div>
      <div id="content">
  <!-- #language fr -->

<p>Une introduction à l'API Base de Données HTTP de CouchDB.</p>
<h2 id="nommage-et-adressage">Nommage et Adressage</h2>
<p>Le nom d'une base de données doit être composé de caractères minuscules (a-z), chiffres (0-9) ou n'importe lequel de ces caractères <em>_$()+-/</em> et doit finir avec un '/' dans l'URL. Le nom noit commencer avec des caractères.</p>
<div class="codehilite"><pre><span class="n">http:</span><span class="sr">//co</span><span class="n">uchserver</span><span class="sr">/databasename/</span>
<span class="n">http:</span><span class="sr">//co</span><span class="n">uchserver</span><span class="sr">/another/</span><span class="n">databasename</span><span class="o">/</span>
<span class="n">http:</span><span class="sr">//co</span><span class="n">uchserver</span><span class="sr">/another/</span><span class="n">database_name</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span>
</pre></div>


<p>''Les caractères en majuscules NE SONT PAS AUTORISÉS dans le nom d'une base de données.*</p>
<div class="codehilite"><pre><span class="n">http:</span><span class="sr">//co</span><span class="n">uchserver</span><span class="sr">/DBNAME/</span> <span class="p">(</span><span class="n">invalid</span><span class="p">)</span>
<span class="n">http:</span><span class="sr">//co</span><span class="n">uchserver</span><span class="sr">/DatabaseName/</span> <span class="p">(</span><span class="n">invalid</span><span class="p">)</span>
<span class="n">http:</span><span class="sr">//co</span><span class="n">uchserver</span><span class="sr">/databaseName/</span> <span class="p">(</span><span class="n">invalid</span><span class="p">)</span>
</pre></div>


<p>Attention le caractère <em>/'' dans le nom d'une base doit être échappé lorsqu'il est utilisé dans une URL, si votre base est nommée </em>his/her<em> alors elle sera accessible à l'adresse </em>http://localhost:5984/his%2Fher*.</p>
<p><em>Raisons de ces restrictions</em></p>
<p>Les noms de bases de données ont des restrictions strictes afin de simpilfier l'association nom-fichier. Comme les bases de données peuvent être repliquées à travers différents systèmes d'exploitation, la façon de nommer les fichiers doit utiliser le plus petit commun dénominateur. Par exemple, ne pas autoriser les caractères en majuscules les rends compatibles avec les systèmes de fichiers ne respectant pas la casse.</p>
<h2 id="liste-des-bases-de-donnees">Liste des bases de données</h2>
<p>Pour obtenir la liste des bases de données dans un serveur CouchDB utilisez l'URI <em>/_all_dbs</em> :</p>
<div class="codehilite"><pre><span class="n">GET</span> <span class="sr">/_all_dbs HTTP/</span><span class="mi">1</span><span class="o">.</span><span class="mo">01</span>
<span class="n">Date:</span> <span class="n">Thu</span><span class="p">,</span> <span class="mi">17</span> <span class="n">Aug</span> <span class="mi">2006</span> <span class="mo">05</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">28</span> <span class="o">+</span><span class="mo">0000</span><span class="n">GMT</span>
</pre></div>


<p>Réponse :</p>
<div class="codehilite"><pre><span class="n">HTTP</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">1</span> <span class="mi">200</span> <span class="n">OK</span>
<span class="n">Date:</span> <span class="n">Thu</span><span class="p">,</span> <span class="mi">17</span> <span class="n">Aug</span> <span class="mi">2006</span> <span class="mo">05</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">28</span> <span class="o">+</span><span class="mo">0000</span><span class="n">GMT</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length:</span> <span class="mi">37</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
<span class="n">Connection:</span> <span class="nb">close</span>

<span class="p">[</span><span class="s">&quot;somedatabase&quot;</span><span class="p">,</span> <span class="s">&quot;anotherdatabase&quot;</span><span class="p">]</span>
</pre></div>


<h2 id="put-creer-une-nouvelle-base-de-donnee">PUT (Créer une nouvelle base de donnée)</h2>
<p>Pour créer une nouvelle base de donnée, envoyez une requête PUT à l'URL de la base de donnée. Actuellement le contenu de la requête PUT est ignoré par le serveur web.</p>
<p>En cas de succès le code HTTP <em>201</em> est retourné. Si la base de donnée existe déjà une erreur <em>409</em> est retournée.</p>
<div class="codehilite"><pre><span class="n">PUT</span> <span class="sr">/somedatabase/</span> <span class="n">HTTP</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length:</span> <span class="mi">0</span>
<span class="n">Date:</span> <span class="n">Thu</span><span class="p">,</span> <span class="mi">17</span> <span class="n">Aug</span> <span class="mi">2006</span> <span class="mo">05</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">28</span> <span class="o">+</span><span class="mo">0000</span><span class="n">GMT</span>
</pre></div>


<p>La réponse du seveur :</p>
<div class="codehilite"><pre><span class="n">HTTP</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">1</span> <span class="mi">201</span> <span class="n">OK</span>
<span class="n">Date:</span> <span class="n">Thu</span><span class="p">,</span> <span class="mi">17</span> <span class="n">Aug</span> <span class="mi">2006</span> <span class="mo">05</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">28</span> <span class="o">+</span><span class="mo">0000</span><span class="n">GMT</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length:</span> <span class="mi">13</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
<span class="n">Connection:</span> <span class="nb">close</span>

<span class="p">{</span><span class="s">&quot;ok&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
</pre></div>


<h2 id="delete">DELETE</h2>
<p>Pour supprimer une base de données, envoyez une requête DELETE sur l'URL de la base de donnée.</p>
<p>En cas de succès un code HTTP <em>202</em> est retourné. Si la base de données n'existe pas une erreur 404 est renvoyée.</p>
<div class="codehilite"><pre><span class="n">DELETE</span> <span class="sr">/somedatabase/</span> <span class="n">HTTP</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length:</span> <span class="mi">1</span>
<span class="n">Date:</span> <span class="n">Thu</span><span class="p">,</span> <span class="mi">17</span> <span class="n">Aug</span> <span class="mi">2006</span> <span class="mo">05</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">28</span> <span class="o">+</span><span class="mo">0000</span><span class="n">GMT</span>
</pre></div>


<p>La réponse du serveur :</p>
<div class="codehilite"><pre><span class="n">HTTP</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">1</span> <span class="mi">202</span> <span class="n">OK</span>
<span class="n">Date:</span> <span class="n">Thu</span><span class="p">,</span> <span class="mi">17</span> <span class="n">Aug</span> <span class="mi">2006</span> <span class="mo">05</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">28</span> <span class="o">+</span><span class="mo">0000</span><span class="n">GMT</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length:</span> <span class="mi">67</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Type:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
<span class="n">Connection:</span> <span class="nb">close</span>

<span class="p">{</span><span class="s">&quot;ok&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
</pre></div>


<h2 id="informations-dune-base-de-donnees">Informations d'une base de données</h2>
<p>Pour récuperer les informations d'une base de donnée, envoyer une requête GET sur l'URL de la base de donnée, ex:</p>
<div class="codehilite"><pre><span class="n">GET</span> <span class="sr">/somedatabase/</span> <span class="n">HTTP</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span>
</pre></div>


<p>La réponse du serveur est un objet JSON similaire à celui-ci :</p>
<div class="codehilite"><pre><span class="p">{</span><span class="s">&quot;db_name&quot;</span><span class="p">:</span> <span class="s">&quot;dj&quot;</span><span class="p">,</span> <span class="s">&quot;doc_count&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s">&quot;doc_del_count&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;update_seq&quot;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span> <span class="s">&quot;compact_running&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span> <span class="s">&quot;disk_size&quot;</span><span class="p">:</span><span class="mi">16845</span><span class="p">}</span>
</pre></div>


<h2 id="compactage">Compactage</h2>
<p>Les bases de données peuvent être compactées afin de réduire l'usage disque. Pour plus de détail voir <a class="internal" href="Compactage.html">Compactage</a>.</p>
</div>
      <div id="footer">
        <p>Hosted on <a href="http://github.com/">Github</a></p>
      </div>
    </div>
  </body>
</html>