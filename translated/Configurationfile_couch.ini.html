<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>CouchDocs - Configurationfile_couch.ini</title>
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/code_highlight.css" type="text/css" media="screen" />
  </head>
  <body>
    <div id="wrapper"> 
      <div id="header">
          <h1><a href="/">CouchDocs</a></h1>
      </div>
      <div id="menu">
  <strong>Navigation</strong>
<ul>
  <li><a href="FrontPage.html">Overview</a></li>
  <li><a href="FrontPage.html#using-couchdb">Using CouchDB</a></li>
  <li><a href="FrontPage.html#when-things-go-wrong">When Things Go Wrong</a></li>
  <li><a href="FrontPage.html#community">Community</a></li>
  <li><a href="FrontPage.html#get-involved">Get Involved</a></li>
  <li><a href="FrontPage.html#books">Books</a></li>
</ul>

<strong>Short Cuts</strong>
<ul>
  <li><a href="Reference.html">Reference</a></li>
  <li><a href="Frequently_asked_questions.html">FAQ</a></li>
</ul>


      <!-- <ul>
        <li>Overview</li>
        <li>Installation</li>
        <li>Introduction</li>
        <li>Conventions</li>
        <li>
          Sections
          <ul>
            <li>Databases</li>
            <li>
              Documents
              <ul>
                <li>Design</li>
                <li>Local</li>
              </ul>
            </li>
            <li>Views</li>
            <li>Rendering</li>
            <li>Configuration</li>
            <li>Statistics</li>
            <li>Security</li>
          </ul>
        </li>
        <li>API Reference</li>
        <li>Client Libraries</li>
        <li>How do I?</li>
        <li>FAQ</li>
      </ul> -->
        
</div>
      <div id="content">
  <p>The default location of the default.ini file is in /usr/local/etc/couchdb.  It is the local configuration file for the CouchDB server. Please note that upgrading CouchDB will overwrite default.ini, so it is a good idea to make changes to local.ini (or to use your own INI file for each CouchDB instance running).</p>
<p>The default configuration file is shown, with each option described in detail.</p>
<div class="codehilite"><pre><span class="p">;</span> <span class="n">etc</span><span class="sr">/couchdb/</span><span class="n">default</span><span class="o">.</span><span class="n">ini</span><span class="o">.</span><span class="n">tpl</span><span class="o">.</span>  <span class="n">Generated</span> <span class="n">from</span> <span class="n">default</span><span class="o">.</span><span class="n">ini</span><span class="o">.</span><span class="n">tpl</span><span class="o">.</span><span class="n">in</span> <span class="n">by</span> <span class="n">configure</span><span class="o">.</span>

<span class="p">;</span> <span class="n">Upgrading</span> <span class="n">CouchDB</span> <span class="n">will</span> <span class="n">overwrite</span> <span class="n">this</span> <span class="n">file</span><span class="o">.</span>

<span class="p">[</span><span class="n">couchdb</span><span class="p">]</span>
<span class="n">database_dir</span> <span class="o">=</span> <span class="sr">/usr/</span><span class="nb">local</span><span class="sr">/var/</span><span class="n">lib</span><span class="o">/</span><span class="n">couchdb</span>
<span class="n">view_index_dir</span> <span class="o">=</span> <span class="sr">/usr/</span><span class="nb">local</span><span class="sr">/var/</span><span class="n">lib</span><span class="o">/</span><span class="n">couchdb</span>
<span class="n">util_driver_dir</span> <span class="o">=</span> <span class="sr">/usr/</span><span class="nb">local</span><span class="sr">/lib/co</span><span class="n">uchdb</span><span class="sr">/erlang/</span><span class="n">lib</span><span class="sr">/couch-0.10.0/</span><span class="n">priv</span><span class="o">/</span><span class="n">lib</span>
<span class="n">max_document_size</span> <span class="o">=</span> <span class="mi">4294967296</span> <span class="p">;</span> <span class="mi">4</span> <span class="n">GB</span>
<span class="n">max_attachment_chunk_size</span> <span class="o">=</span> <span class="mi">4294967296</span> <span class="p">;</span> <span class="mi">4</span><span class="n">GB</span>
<span class="n">os_process_timeout</span> <span class="o">=</span> <span class="mi">5000</span> <span class="p">;</span> <span class="mi">5</span> <span class="n">seconds</span><span class="o">.</span> <span class="k">for</span> <span class="n">view</span> <span class="ow">and</span> <span class="n">external</span> <span class="n">servers</span><span class="o">.</span>
<span class="n">max_dbs_open</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">delayed_commits</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">batch_save_size</span> <span class="o">=</span> <span class="mi">1000</span> <span class="p">;</span> <span class="n">number</span> <span class="n">of</span> <span class="n">docs</span> <span class="n">at</span> <span class="n">which</span> <span class="n">to</span> <span class="n">save</span> <span class="n">a</span> <span class="n">batch</span>
<span class="n">batch_save_interval</span> <span class="o">=</span> <span class="mi">1000</span> <span class="p">;</span> <span class="n">milliseconds</span> <span class="n">after</span> <span class="n">which</span> <span class="n">to</span> <span class="n">save</span> <span class="n">batches</span>

<span class="p">[</span><span class="n">httpd</span><span class="p">]</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">5984</span>
<span class="n">bind_address</span> <span class="o">=</span> <span class="mi">127</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span>
<span class="n">authentication_handlers</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_oauth</span><span class="p">,</span> <span class="n">oauth_authentication_handler</span><span class="p">},</span> <span class="p">{</span><span class="n">couch_httpd_auth</span><span class="p">,</span> <span class="n">default_authentication_handler</span><span class="p">}</span>
<span class="n">default_handler</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_db</span><span class="p">,</span> <span class="n">handle_request</span><span class="p">}</span>
<span class="n">WWW</span><span class="o">-</span><span class="n">Authenticate</span> <span class="o">=</span> <span class="n">Basic</span> <span class="n">realm</span><span class="o">=</span><span class="s">&quot;administrator&quot;</span>

<span class="p">[</span><span class="nb">log</span><span class="p">]</span>
<span class="n">file</span> <span class="o">=</span> <span class="sr">/usr/</span><span class="nb">local</span><span class="sr">/var/</span><span class="nb">log</span><span class="sr">/couchdb/co</span><span class="n">uch</span><span class="o">.</span><span class="nb">log</span>
<span class="n">level</span> <span class="o">=</span> <span class="n">info</span>

<span class="p">[</span><span class="n">couch_httpd_auth</span><span class="p">]</span>
<span class="n">authentication_db</span> <span class="o">=</span> <span class="n">users</span>
<span class="n">secret</span> <span class="o">=</span> <span class="n">replace</span> <span class="n">this</span> <span class="n">with</span> <span class="n">a</span> <span class="n">real</span> <span class="n">secret</span> <span class="n">in</span> <span class="n">your</span> <span class="nb">local</span><span class="o">.</span><span class="n">ini</span> <span class="n">file</span>
<span class="n">require_valid_user</span> <span class="o">=</span> <span class="n">false</span>

<span class="p">[</span><span class="n">query_servers</span><span class="p">]</span>
<span class="n">javascript</span> <span class="o">=</span> <span class="sr">/usr/</span><span class="nb">local</span><span class="sr">/bin/co</span><span class="n">uchjs</span> <span class="sr">/usr/</span><span class="nb">local</span><span class="sr">/share/co</span><span class="n">uchdb</span><span class="sr">/server/m</span><span class="n">ain</span><span class="o">.</span><span class="n">js</span>

<span class="p">;</span> <span class="n">Changing</span> <span class="n">reduce_limit</span> <span class="n">to</span> <span class="n">false</span> <span class="n">will</span> <span class="n">disable</span> <span class="n">reduce_limit</span><span class="o">.</span>
<span class="p">;</span> <span class="n">If</span> <span class="n">you</span> <span class="n">think</span> <span class="n">you</span><span class="s">&#39;re hitting reduce_limit with a &quot;good&quot; reduce function,</span>
<span class="s">; please let us know on the mailing list so we can fine tune the heuristic.</span>
<span class="s">[query_server_config]</span>
<span class="s">reduce_limit = true</span>

<span class="s">; enable external as an httpd handler, then link it with commands here.</span>
<span class="s">; note, this api is still under consideration.</span>
<span class="s">; [external]</span>
<span class="s">; mykey = /path/to/mycommand</span>

<span class="s">[daemons]</span>
<span class="s">view_manager={couch_view, start_link, []}</span>
<span class="s">external_manager={couch_external_manager, start_link, []}</span>
<span class="s">db_update_notifier={couch_db_update_notifier_sup, start_link, []}</span>
<span class="s">batch_save={couch_batch_save_sup, start_link, []}</span>
<span class="s">query_servers={couch_query_servers, start_link, []}</span>
<span class="s">httpd={couch_httpd, start_link, []}</span>
<span class="s">stats_aggregator={couch_stats_aggregator, start, []}</span>
<span class="s">stats_collector={couch_stats_collector, start, []}</span>

<span class="s">[httpd_global_handlers]</span>
<span class="s">/ = {couch_httpd_misc_handlers, handle_welcome_req, &lt;&lt;&quot;Welcome&quot;&gt;&gt;}</span>
<span class="s">favicon.ico = {couch_httpd_misc_handlers, handle_favicon_req, &quot;/usr/local/share/couchdb/www&quot;}</span>

<span class="s">_utils = {couch_httpd_misc_handlers, handle_utils_dir_req, &quot;/usr/local/share/couchdb/www&quot;}</span>
<span class="s">_all_dbs = {couch_httpd_misc_handlers, handle_all_dbs_req}</span>
<span class="s">_active_tasks = {couch_httpd_misc_handlers, handle_task_status_req}</span>
<span class="s">_config = {couch_httpd_misc_handlers, handle_config_req}</span>
<span class="s">_replicate = {couch_httpd_misc_handlers, handle_replicate_req}</span>
<span class="s">_uuids = {couch_httpd_misc_handlers, handle_uuids_req}</span>
<span class="s">_restart = {couch_httpd_misc_handlers, handle_restart_req}</span>
<span class="s">_stats = {couch_httpd_stats_handlers, handle_stats_req}</span>
<span class="s">_log = {couch_httpd_misc_handlers, handle_log_req}</span>
<span class="s">_sleep = {couch_httpd_misc_handlers, handle_sleep_req}</span>
<span class="s">_session = {couch_httpd_auth, handle_session_req}</span>
<span class="s">_oauth = {couch_httpd_oauth, handle_oauth_req}</span>
<span class="s">_user = {couch_httpd_auth, handle_user_req}</span>

<span class="s">[httpd_db_handlers]</span>
<span class="s">_view_cleanup = {couch_httpd_db, handle_view_cleanup_req}</span>
<span class="s">_compact = {couch_httpd_db, handle_compact_req}</span>
<span class="s">_design = {couch_httpd_db, handle_design_req}</span>
<span class="s">_view = {couch_httpd_view, handle_db_view_req}</span>
<span class="s">_temp_view = {couch_httpd_view, handle_temp_view_req}</span>
<span class="s">_changes = {couch_httpd_db, handle_changes_req}</span>

<span class="s">; The external module takes an optional argument allowing you to narrow it to a</span>
<span class="s">; single script. Otherwise the script name is inferred from the first path section</span>
<span class="s">; after _external&#39;</span><span class="n">s</span> <span class="n">own</span> <span class="n">path</span><span class="o">.</span>
<span class="p">;</span> <span class="n">_mypath</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_external</span><span class="p">,</span> <span class="n">handle_external_req</span><span class="p">,</span> <span class="s-Regexp">&lt;&lt;&quot;mykey&quot;&gt;</span><span class="o">&gt;</span><span class="p">}</span>
<span class="p">;</span> <span class="n">_external</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_external</span><span class="p">,</span> <span class="n">handle_external_req</span><span class="p">}</span>

<span class="p">[</span><span class="n">httpd_design_handlers</span><span class="p">]</span>
<span class="n">_view</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_view</span><span class="p">,</span> <span class="n">handle_view_req</span><span class="p">}</span>
<span class="n">_show</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_show</span><span class="p">,</span> <span class="n">handle_doc_show_req</span><span class="p">}</span>
<span class="n">_list</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_show</span><span class="p">,</span> <span class="n">handle_view_list_req</span><span class="p">}</span>
<span class="n">_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_db</span><span class="p">,</span>   <span class="n">handle_design_info_req</span><span class="p">}</span>
<span class="n">_update</span> <span class="o">=</span> <span class="p">{</span><span class="n">couch_httpd_show</span><span class="p">,</span> <span class="n">handle_doc_update_req</span><span class="p">}</span>
</pre></div>
</div>
      <div id="footer">
        <p>Hosted on <a href="http://github.com/">Github</a></p>
      </div>
    </div>
  </body>
</html>