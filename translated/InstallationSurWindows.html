<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>CouchDocs - InstallationSurWindows</title>
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/code_highlight.css" type="text/css" media="screen" />
  </head>
  <body>
    <div id="wrapper"> 
      <div id="header">
          <h1><a href="/">CouchDocs</a></h1>
      </div>
      <div id="menu">
  <strong>Navigation</strong>
<ul>
  <li><a href="FrontPage.html">Overview</a></li>
  <li><a href="FrontPage.html#using-couchdb">Using CouchDB</a></li>
  <li><a href="FrontPage.html#when-things-go-wrong">When Things Go Wrong</a></li>
  <li><a href="FrontPage.html#community">Community</a></li>
  <li><a href="FrontPage.html#getting-involved">Get Involved</a></li>
  <li><a href="FrontPage.html#books">Books</a></li>
</ul>

<strong>Short Cuts</strong>
<ul>
  <li><a href="Reference.html">Reference</a></li>
  <li><a href="Frequently_asked_questions.html">FAQ</a></li>
</ul>


      <!-- <ul>
        <li>Overview</li>
        <li>Installation</li>
        <li>Introduction</li>
        <li>Conventions</li>
        <li>
          Sections
          <ul>
            <li>Databases</li>
            <li>
              Documents
              <ul>
                <li>Design</li>
                <li>Local</li>
              </ul>
            </li>
            <li>Views</li>
            <li>Rendering</li>
            <li>Configuration</li>
            <li>Statistics</li>
            <li>Security</li>
          </ul>
        </li>
        <li>API Reference</li>
        <li>Client Libraries</li>
        <li>How do I?</li>
        <li>FAQ</li>
      </ul> -->
        
</div>
      <div id="content">
  <!-- #language fr -->

<p>CouchDB ne s'installe pas nativement sur  Windows mais il est possible de l'installer à la main.</p>
<p>Merci de mettre à jour ce guide si nécessaire, nous souhaitons récupérer votre retour d'expérience afin de l'intégrer dans la procedédure d'installation officielle.</p>
<h2 id="dependances">Dépendances</h2>
<p>Vous avez besoin des logiciels suivants installés sur votre système :</p>
<ul>
<li><a href="http://www.erlang.org/download.html">Erlang/OTP</a></li>
<li>C Compiler/Linker (such as <a href="http://gcc.gnu.org/">GCC</a> or <a href="http://msdn.microsoft.com/en-us/visualc/default.aspx">Visual C++</a>)</li>
<li>Make (such as <a href="http://www.gnu.org/software/make/">GNU Make</a> or <a href="http://msdn.microsoft.com/en-us/library/dd9y37ha(VS.71).aspx">nmake</a>)</li>
<li><a href="http://www.openssl.org/">OpenSSL</a></li>
<li><a href="http://www.icu-project.org/">ICU</a></li>
<li><a href="http://www.mozilla.org/js/spidermonkey/">SpiderMonkey</a></li>
</ul>
<h2 id="installation-de-base">Installation de base</h2>
<p>Après avoir installé Erlang vous devez obtenir quelque chose de similaire à :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span>
</pre></div>


<p>Copiez l'arborescence complète du source de Couchdb ici :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">lib</span><span class="o">\</span><span class="n">couchdb</span><span class="o">-</span><span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="mi">0</span>
</pre></div>


<p>Créeez le dossier vide suivant :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">lib</span><span class="o">\</span><span class="n">mochiweb</span><span class="o">-</span><span class="mi">0</span><span class="o">.</span><span class="mo">01</span><span class="o">\</span><span class="n">ebin</span>
</pre></div>


<p>À partir de ICU copiez <code>icu*.dll</code> et <code>libeay32.dll</code> vers :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">erts</span><span class="o">-</span><span class="mi">5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">2</span><span class="o">\</span><span class="n">bin</span>
</pre></div>


<p>De !SpiderMonkey copiez <code>js32.dll</code> et  <code>jsshell.exe</code> vers :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">erts</span><span class="o">-</span><span class="mi">5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">2</span><span class="o">\</span><span class="n">bin</span>
</pre></div>


<h2 id="compilation-c">Compilation C</h2>
<h3 id="couchdbcouch_erl_driverc">couchdb/couch_erl_driver.c</h3>
<p>C'est la couche qui fournit les fonctionnalités de ICU à CouchDB.</p>
<p>Le plus simple pour compiler une DLL est de créer un projet Win32 DLL dans un IDE, ajoutez <code>couch_erl_driver.c</code> au projet, et changez les préférences du projet pour inclure les chemins de Erlang ERTS et des fichiers d'entêtes de ICU4C.</p>
<p>Créez le dossier vide suivant :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">lib</span><span class="o">\</span><span class="n">couchdb</span><span class="o">-</span><span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="mi">0</span><span class="o">\</span><span class="n">priv</span>
</pre></div>


<p>Copiez la DDL vers :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">lib</span><span class="o">\</span><span class="n">couchdb</span><span class="o">-</span><span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="mi">0</span><span class="o">\</span><span class="n">priv</span><span class="o">\</span><span class="n">couch_erl_driver</span><span class="o">.</span><span class="n">dll</span>
</pre></div>


<h3 id="couchdbcouch_jsc">couchdb/couch_js.c</h3>
<p>C'est la couche qui fournit UTF-8 et les améliorations cache à !SpiderMonkey.</p>
<p>Remplacez js.c par couch_js.c, et changez '#include <jsapi.h>' en '#include "jsapi.h"', ensuite compilez js.exe à nouveau, renommez le en couch_js.exe et copiez le vers :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">erts</span><span class="o">-</span><span class="mi">5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">2</span><span class="o">\</span><span class="n">bin</span>
</pre></div>


<h2 id="compilation-erlang">Compilation Erlang</h2>
<p>Créez le fichier suivant :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">lib</span><span class="o">\</span><span class="n">couchdb</span><span class="o">-</span><span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="mi">0</span><span class="o">\</span><span class="n">src</span><span class="o">\</span><span class="n">Emakefile</span>
</pre></div>


<p>Ajoutez le contenu suivant :</p>
<div class="codehilite"><pre><span class="p">{</span><span class="s">&#39;./couchdb/*&#39;</span><span class="p">,</span> <span class="p">[{</span><span class="n">outdir</span><span class="p">,</span><span class="s">&quot;../ebin&quot;</span><span class="p">}]}</span><span class="o">.</span>
<span class="p">{</span><span class="s">&#39;./mochiweb/*&#39;</span><span class="p">,</span> <span class="p">[{</span><span class="n">outdir</span><span class="p">,</span><span class="s">&quot;../../mochiweb-0.01/ebin&quot;</span><span class="p">}]}</span><span class="o">.</span>
</pre></div>


<p>Lançez <code>erl</code> (ou <code>werl</code>) et executez la commande suivante pour changer le dossier :</p>
<div class="codehilite"><pre><span class="n">cd</span><span class="p">(</span><span class="s">&quot;C:/Program Files/erl5.6.3/lib/couchdb-0.8.0/src&quot;</span><span class="p">)</span><span class="o">.</span>
</pre></div>


<p>Exécutez cette commande pour compiler CouchDB :</p>
<div class="codehilite"><pre><span class="err">make:all().</span>
</pre></div>


<h2 id="configuration">Configuration</h2>
<p>Copiez le fichier suivant :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="o">\</span><span class="n">Program</span> <span class="n">Files</span><span class="o">\</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">\</span><span class="n">lib</span><span class="o">\</span><span class="n">couchdb</span><span class="o">-</span><span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="mi">0</span><span class="o">\</span><span class="n">etc</span><span class="o">\</span><span class="n">couchdb</span><span class="o">\</span><span class="n">couch</span><span class="o">.</span><span class="n">ini</span><span class="o">.</span><span class="n">tpl</span><span class="o">.</span><span class="n">in</span>
</pre></div>


<p>ici :</p>
<div class="codehilite"><pre><span class="n">C:</span><span class="sr">/Program Files/</span><span class="n">erl5</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="sr">/bin/co</span><span class="n">uch</span><span class="o">.</span><span class="n">ini</span>
</pre></div>


<p>Éditez ce fichier de la façon suivante :</p>
<div class="codehilite"><pre><span class="k">[Couch]</span>

<span class="na">ConsoleStartupMsg</span><span class="o">=</span><span class="s">Apache CouchDB is starting.</span>

<span class="na">DbRootDir</span><span class="o">=</span><span class="s">C:/Path/To/Database/Directory</span>

<span class="na">Port</span><span class="o">=</span><span class="s">5984</span>

<span class="na">BindAddress</span><span class="o">=</span><span class="s">127.0.0.1</span>

<span class="na">DocumentRoot</span><span class="o">=</span><span class="s">C:/Program Files/erl5.6.3/lib/couchdb-0.8.0/share/www</span>

<span class="na">LogFile</span><span class="o">=</span><span class="s">C:/Path/To/Log/Directory</span>

<span class="na">UtilDriverDir</span><span class="o">=</span><span class="s">C:/Program Files/erl5.6.3/lib/couchdb-0.8.0/priv/couch_erl_driver.dll</span>

<span class="na">LogLevel</span><span class="o">=</span><span class="s">info</span>

<span class="k">[Couch Query Servers]</span>

<span class="na">javascript</span><span class="o">=</span><span class="s">couch_js &quot;C:/Program Files/erl5.6.3/lib/couchdb-0.8.0/share/server/main.js&quot;</span>
</pre></div>


<p>Make sure that the <code>DbRootDir</code> exists and that the <code>LogFile</code> can be created.</p>
<h2 id="execution">Exécution</h2>
<p>Lançez <code>erl</code> (ou <code>werl</code>) et exécutez la commande suivante :</p>
<div class="codehilite"><pre><span class="err">couch_server:start().</span>
</pre></div>


<p>Pour voir si tout a fonctionné à ce point de l'installation, rendez-vous avec votre navigateur sur 
<a href="http">http</a> et lançez <code>test suite</code>.</p>
</div>
      <div id="footer">
        <p>Hosted on <a href="http://github.com/">Github</a></p>
      </div>
    </div>
  </body>
</html>