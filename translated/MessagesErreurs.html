<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>CouchDocs - MessagesErreurs</title>
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/code_highlight.css" type="text/css" media="screen" />
  </head>
  <body>
    <div id="wrapper"> 
      <div id="header">
          <h1><a href="/">CouchDocs</a></h1>
      </div>
      <div id="menu">
  <strong>Navigation</strong>
<ul>
  <li><a href="FrontPage.html">Overview</a></li>
  <li><a href="FrontPage.html#using-couchdb">Using CouchDB</a></li>
  <li><a href="FrontPage.html#when-things-go-wrong">When Things Go Wrong</a></li>
  <li><a href="FrontPage.html#community">Community</a></li>
  <li><a href="FrontPage.html#getting-involved">Get Involved</a></li>
  <li><a href="FrontPage.html#books">Books</a></li>
</ul>

<strong>Short Cuts</strong>
<ul>
  <li><a href="Reference.html">Reference</a></li>
  <li><a href="Frequently_asked_questions.html">FAQ</a></li>
</ul>


      <!-- <ul>
        <li>Overview</li>
        <li>Installation</li>
        <li>Introduction</li>
        <li>Conventions</li>
        <li>
          Sections
          <ul>
            <li>Databases</li>
            <li>
              Documents
              <ul>
                <li>Design</li>
                <li>Local</li>
              </ul>
            </li>
            <li>Views</li>
            <li>Rendering</li>
            <li>Configuration</li>
            <li>Statistics</li>
            <li>Security</li>
          </ul>
        </li>
        <li>API Reference</li>
        <li>Client Libraries</li>
        <li>How do I?</li>
        <li>FAQ</li>
      </ul> -->
        
</div>
      <div id="content">
  <!-- #language fr -->

<p>Explications et solutions aux messages d'erreurs qui peuvent survenir lors de la compilation ou de l'exécution de CouchDB.</p>
<h2 id="icu-config-manquant">icu-config manquant</h2>
<h3 id="probleme">Problème</h3>
<div class="codehilite"><pre>*** The icu-config script could not be found. Make sure it is
*** in your path, and that taglib is properly installed.
*** Or see <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://ibm.com/software/globalization/icu/&quot;</span><span class="nt">&gt;</span>http://ibm.com/software/globalization/icu/<span class="nt">&lt;/a&gt;</span>
</pre></div>


<h3 id="solution">Solution</h3>
<p>Installez ICU et utilisez <code>locate</code> pour localiser la commande <code>icu-config</code> :</p>
<div class="codehilite"><pre><span class="n">locate</span> <span class="n">icu</span><span class="o">-</span><span class="n">config</span>
</pre></div>


<p>Ajoutez le dossier indiqué par cette commande à votre <code>PATH</code>:</p>
<div class="codehilite"><pre><span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="s">&quot;$PATH:/usr/local/bin&quot;</span>
</pre></div>


<h2 id="ld_library_path-incorrect">LD_LIBRARY_PATH incorrect</h2>
<h3 id="probleme_1">Problème</h3>
<div class="codehilite"><pre><span class="nv">$</span> <span class="nv">couchdb</span>      
<span class="n">Apache</span> <span class="n">CouchDB</span> <span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">incubating</span> <span class="p">(</span><span class="n">LogLevel</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
<span class="n">Apache</span> <span class="n">CouchDB</span> <span class="n">is</span> <span class="n">starting</span><span class="o">.</span>

<span class="p">{</span><span class="s">&quot;init terminating in do_boot&quot;</span><span class="p">,{</span><span class="n">error</span><span class="p">,{</span><span class="n">open_error</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">}}</span><span class="err">​</span><span class="p">}</span>

<span class="n">Crash</span> <span class="nb">dump</span> <span class="n">was</span> <span class="n">written</span> <span class="n">to:</span> <span class="n">erl_crash</span><span class="o">.</span><span class="nb">dump</span>
<span class="n">init</span> <span class="n">terminating</span> <span class="n">in</span> <span class="n">do_boot</span> <span class="p">()</span>
</pre></div>


<h3 id="solution_1">Solution</h3>
<p>Vous devez fixer correctement la variable d'environnement  <code>LD_LIBRARY_PATH</code> afin qu'elle pointe bien vers les bibliothèques installées. Dans Mac OS X, l'équivalent est <code>DYLD_LIBRARY_PATH</code>.</p>
<p>Exemple pour un utilisateur normal :</p>
<div class="codehilite"><pre><span class="n">LD_LIBRARY_PATH</span><span class="o">=</span><span class="sr">/usr/</span><span class="nb">local</span><span class="sr">/lib:/</span><span class="n">usr</span><span class="sr">/local/</span><span class="n">js</span><span class="o">/</span><span class="n">lib</span> <span class="n">couchdb</span>
</pre></div>


<p>Exemple pour l'utilisateur <code>couchdb</code> :</p>
<div class="codehilite"><pre><span class="n">echo</span> <span class="n">LD_LIBRARY_PATH</span><span class="o">=</span><span class="sr">/usr/</span><span class="nb">local</span><span class="sr">/lib:/</span><span class="n">usr</span><span class="sr">/local/</span><span class="n">js</span><span class="o">/</span><span class="n">lib</span> <span class="n">couchdb</span> <span class="o">|</span> <span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">couchdb</span> <span class="n">sh</span>
</pre></div>


<h2 id="architecture-binaire-incompatible">Architecture Binaire Incompatible</h2>
<p>Sur Mac OS X, les bibliothèques et exécutables peuvent être des <em>fat binaries</em> qui supportent plusieurs architectures processeur (PPC and x86, 32 and 64 bit).  Mais cela signifie aussi que vous pouvez avoir des problèmes lors du chargement de bibliothèque qui ne supporte pas l'archictecture sur laquelle l'application est exécutée. </p>
<h3 id="probleme_2">Problème</h3>
<div class="codehilite"><pre><span class="nv">$</span> <span class="nv">couchdb</span>      
<span class="n">Apache</span> <span class="n">CouchDB</span> <span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">incubating</span> <span class="p">(</span><span class="n">LogLevel</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
<span class="n">Apache</span> <span class="n">CouchDB</span> <span class="n">is</span> <span class="n">starting</span><span class="o">.</span>

<span class="p">{</span><span class="s">&quot;init terminating in do_boot&quot;</span><span class="p">,{</span><span class="n">error</span><span class="p">,{</span><span class="n">open_error</span><span class="p">,</span><span class="o">-</span><span class="mi">12</span><span class="p">}}</span><span class="err">​</span><span class="p">}</span>

<span class="n">Crash</span> <span class="nb">dump</span> <span class="n">was</span> <span class="n">written</span> <span class="n">to:</span> <span class="n">erl_crash</span><span class="o">.</span><span class="nb">dump</span>
<span class="n">init</span> <span class="n">terminating</span> <span class="n">in</span> <span class="n">do_boot</span> <span class="p">()</span>
</pre></div>


<h3 id="solution_2">Solution</h3>
<p>Vous avez probablement compilé Erlang avec l'option 64 bits. Le problème est que ICU, que CouchDB tente de charger au démarrage, n'a pas été compilé avec le support 64 bits, et donc ne peut être chargé dans le processus 64 bits d'Erlang.</p>
<p>Recompilez Erlang et résistez à la tentation de construire un binaire 64 bits (omettez juste l'option <code>--enable-darwin-64bit</code> ). L'option <code>--enable-darwin-universal</code> fonctionne correctement mais notez que pour l'instant il n'existe pas de binaire universel d'ICU.</p>
<h2 id="port-non-disponible">Port non disponible</h2>
<h3 id="probleme_3">Problème</h3>
<div class="codehilite"><pre><span class="nv">$</span> <span class="nv">couchdb</span>      
<span class="n">Apache</span> <span class="n">CouchDB</span> <span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">incubating</span> <span class="p">(</span><span class="n">LogLevel</span><span class="o">=</span><span class="n">info</span><span class="p">)</span>
<span class="n">Apache</span> <span class="n">CouchDB</span> <span class="n">is</span> <span class="n">starting</span><span class="o">.</span>

<span class="o">...</span>
<span class="p">[</span><span class="n">error</span><span class="p">]</span> <span class="p">[</span><span class="s-Regexp">&lt;0.46.0&gt;</span><span class="p">]</span> <span class="p">{</span><span class="n">error_report</span><span class="p">,</span><span class="s-Regexp">&lt;0.21.0&gt;</span><span class="p">,</span>
<span class="o">...</span>
               <span class="p">{</span><span class="n">couch_httpd</span><span class="p">,</span><span class="n">start_link</span><span class="p">,</span>
                   <span class="p">[</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">,</span><span class="s">&quot;5984&quot;</span><span class="p">,</span><span class="s">&quot;/tmp/couchdb-a/share/couchdb/www&quot;</span><span class="p">]}},</span>
           <span class="p">{</span><span class="n">restart_type</span><span class="p">,</span><span class="n">permanent</span><span class="p">},</span>
           <span class="p">{</span><span class="nb">shutdown</span><span class="p">,</span><span class="mi">1000</span><span class="p">},</span>
           <span class="p">{</span><span class="n">child_type</span><span class="p">,</span><span class="n">supervisor</span><span class="p">}]}]}}</span>
<span class="o">...</span>
</pre></div>


<h3 id="solution_3">Solution</h3>
<p>Editez le fichier <code>/etc/couchdb/couch.ini</code> et modifiez <code>Port</code>pour un port disponible.</p>
</div>
      <div id="footer">
        <p>Hosted on <a href="http://github.com/">Github</a></p>
      </div>
    </div>
  </body>
</html>