<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>CouchDocs - Configuring_distributed_systems</title>
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/code_highlight.css" type="text/css" media="screen" />
  </head>
  <body>
    <div id="wrapper"> 
      <div id="header">
          <h1><a href="/">CouchDocs</a></h1>
      </div>
      <div id="menu">
  <strong>Navigation</strong>
<ul>
  <li><a href="FrontPage.html">Overview</a></li>
  <li><a href="FrontPage.html#using-couchdb">Using CouchDB</a></li>
  <li><a href="FrontPage.html#when-things-go-wrong">When Things Go Wrong</a></li>
  <li><a href="FrontPage.html#community">Community</a></li>
  <li><a href="FrontPage.html#get-involved">Get Involved</a></li>
  <li><a href="FrontPage.html#books">Books</a></li>
</ul>

<strong>Short Cuts</strong>
<ul>
  <li><a href="Reference.html">Reference</a></li>
  <li><a href="Frequently_asked_questions.html">FAQ</a></li>
</ul>


      <!-- <ul>
        <li>Overview</li>
        <li>Installation</li>
        <li>Introduction</li>
        <li>Conventions</li>
        <li>
          Sections
          <ul>
            <li>Databases</li>
            <li>
              Documents
              <ul>
                <li>Design</li>
                <li>Local</li>
              </ul>
            </li>
            <li>Views</li>
            <li>Rendering</li>
            <li>Configuration</li>
            <li>Statistics</li>
            <li>Security</li>
          </ul>
        </li>
        <li>API Reference</li>
        <li>Client Libraries</li>
        <li>How do I?</li>
        <li>FAQ</li>
      </ul> -->
        
</div>
      <div id="content">
  <p>This is a stub for a page to discuss how to actually get couchdb running in a distributed fashion.</p>
<p>Distributed CouchDB implementations:</p>
<ul>
<li>
<p>CouchDB currently scales for reads, by allowing synchronization between multiple servers.</p>
</li>
<li>
<p>CouchDB does not currently support partitioning.</p>
</li>
</ul>
<p>(couch-dev post from Jan Lehnardt - July 2008)</p>
<div class="codehilite"><pre><span class="n">At</span> <span class="n">the</span> <span class="n">moment</span><span class="p">,</span> <span class="n">CouchDB</span> <span class="n">runs</span> <span class="n">best</span> <span class="n">on</span> <span class="n">a</span> <span class="n">single</span> <span class="n">machine</span>
<span class="n">with</span> <span class="n">multiple</span> <span class="n">machines</span> <span class="k">for</span> <span class="n">a</span> <span class="n">cluster</span> <span class="n">using</span> <span class="n">replication</span> <span class="n">to</span>
<span class="n">synchronise</span> <span class="n">data</span><span class="o">.</span> <span class="n">Erlang</span> <span class="n">allows</span> <span class="n">a</span> <span class="n">VM</span> <span class="n">to</span> <span class="n">run</span> <span class="n">on</span> <span class="n">multiple</span>
<span class="n">machines</span> <span class="ow">and</span> <span class="n">we</span> <span class="k">do</span> <span class="ow">not</span> <span class="n">yet</span> <span class="n">take</span> <span class="n">advantage</span> <span class="n">of</span> <span class="n">that</span> <span class="n">fact</span><span class="o">.</span>
<span class="n">This</span> <span class="n">is</span> <span class="n">an</span> <span class="n">area</span> <span class="n">that</span> <span class="n">is</span> <span class="n">worth</span> <span class="n">investigating</span><span class="o">.</span>

<span class="n">The</span> <span class="n">road</span> <span class="nb">map</span> <span class="n">is</span> <span class="n">at</span> <span class="n">http:</span><span class="sr">//i</span><span class="n">ncubator</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="sr">/couchdb/</span><span class="n">roadmap</span><span class="o">.</span><span class="n">html</span>

<span class="o">...</span> <span class="n">scaling</span> <span class="n">parts</span> <span class="n">are</span> <span class="n">Future</span> <span class="n">Feature</span> <span class="n">work</span><span class="o">.</span>
<span class="n">A</span> <span class="n">couple</span> <span class="n">of</span> <span class="n">people</span> <span class="n">have</span> <span class="n">voiced</span> <span class="n">interest</span> <span class="n">in</span> <span class="n">contributing</span> <span class="n">there</span>
<span class="n">especially</span> <span class="n">the</span> <span class="n">database</span> <span class="n">partitioning</span><span class="p">,</span> <span class="n">but</span> <span class="n">nothing</span> <span class="n">has</span> <span class="n">come</span>
<span class="n">out</span> <span class="n">of</span> <span class="n">that</span> <span class="n">yet</span><span class="o">.</span>
</pre></div>


<h2 id="editorial-notes">Editorial Notes</h2>
<ul>
<li>I see that there is replication via the 'replication' functionality on the http://localhost:5984/_utils console interface, but how does one distribute a database across, say 10 hosts?</li>
<li>Is there a way to specify the number of copies of a piece of data?  (Presumes not all hosts have copies of each piece of data)</li>
<li>Is there a piece of this that can be configured in the couch.ini file, such than when the topology changes (ie. server add or removal) that things can be put back into sync?</li>
</ul>
<p>Excerpts from the Architectural Document, http://incubator.apache.org/couchdb/docs/overview.html :</p>
<div class="codehilite"><pre><span class="n">Using</span> <span class="n">just</span> <span class="n">the</span> <span class="n">basic</span> <span class="n">replication</span> <span class="n">model</span><span class="p">,</span> <span class="n">many</span> <span class="n">traditionally</span> <span class="n">single</span> <span class="n">server</span> <span class="n">database</span> <span class="n">applications</span> <span class="n">can</span> <span class="n">be</span> <span class="n">made</span> <span class="n">distributed</span> <span class="n">with</span> <span class="n">almost</span> <span class="nb">no</span> <span class="n">extra</span> <span class="n">work</span><span class="o">.</span>
</pre></div>


<ul>
<li>Let's try to document this.  What do we mean by <strong>distributed</strong>?</li>
</ul>
<h3 id="distributed-defined">Distributed defined</h3>
<p>Here's what some people might <em>assume</em> we mean by distributed data store:</p>
<ul>
<li>We (couchdb) have a client which will <strong>shard</strong> the data by key, and direct it to the correct server (shard), such that the writes of the system will <strong>scale</strong>.  That is that there are many <em>writers</em>, in a collision-free update environment.</li>
<li>Reads may scale if they outnumber the writes using some form of replication for read-only-clients.</li>
<li>If a master data store node is lost, then the client (or some proxy mechanism) can switch over to a new master data store, which is <em>really up to date</em> (ie. milliseconds), and the client will continue without a hitch.</li>
</ul>
</div>
      <div id="footer">
        <p>Hosted on <a href="http://github.com/">Github</a></p>
      </div>
    </div>
  </body>
</html>